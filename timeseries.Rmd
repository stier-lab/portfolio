---
title: "Time series analysis"
subtitle: "âš”<br/>with ecofolio and MARSS"
author: "Megsie Siple"
institute: "Stier Lab @ ucsb"
date: "2016/12/12 (updated: `r Sys.Date()`)"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

class: inverse, center, middle

# Get Started

---

# Before we start

Install the **ecofolio** package from [Github](https://github.com/seananderson/ecofolio):

```{r eval=FALSE, tidy=FALSE}
devtools::install_github("seananderson/ecofolio")
```

```{r include=FALSE}
library(tidyverse)
```

--

This is a cool package by Sean Anderson, fisheries and general genius, which calculates different portfolio measures. 

---

# Dataset

Lily has prepared some LTER fish data, which look like this:
```{r echo=FALSE, eval=TRUE, tidy=FALSE}

fish <- read.csv(here::here("data","final_six_fished_unfished.csv"))
fish %>%
  mutate(fished = recode(fished, 
                         no = "unfished",
                          yes = "fished")) %>%
  ggplot(aes(x = Year, y = Count_m2, colour = Taxonomy)) +
  geom_line() +
  facet_wrap(~fished) +
  theme_classic(base_size = 16)
```
---

# Refresher about time series

There are some time series basics that it helps to know when you're analyzing time series data.

These basics are all included in `stats` so you don't have to download a package. 

--- 


# Random walk

Random walk models look like this:

$$X_t = X_{t-1}+w_t$$

In R code, this would look like the following:
```{r}
set.seed(123)
TT <- 100
xx <- ww <- rnorm(n = TT, mean = 0, sd = 1)
for (t in 2:TT) {# compute values 2 thru TT
    xx[t] <- xx[t - 1] + ww[t]
}
```
---

# First-order autoregressive (AR-1) models

AR-1 models look like this:

$$X_t = c + \rho X_{t-1} +\epsilon_t$$
where $X_t$ is the variable of interest (usually abundance or biomass), $c$ is a constant, $\rho$ is an autocorrelation parameter, and $\epsilon_t$ is white noise ( $\epsilon_t ~ N(0, \sigma^2)$ ).

-- 

You can simulate an AR-1 model in R as follows:


---
